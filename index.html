<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Atendimento √† Comunidade</title>
    <link rel="stylesheet" href="style.css?v=115">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<div id="loginOverlay" class="login-overlay">
    <div class="login-card">
        <h2>Acesso ao Sistema</h2>
        <p>Por favor, insira suas credenciais.</p>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Usu√°rio</label>
                <input type="text" id="username" name="username" required autocomplete="username">
            </div>
            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" id="password" name="password" required autocomplete="current-password">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Entrar</button>
            <div id="loginError" class="login-error" style="display: none;">Usu√°rio ou senha incorretos.</div>
        </form>
    </div>
</div>

<div class="container">
    <!-- Barra de Busca Avan√ßada -->
    <div class="toolbar no-print">
        <div class="search-box">
            <button type="button" class="btn btn-secondary" id="btnNovoItem">Novo</button>
            <input type="text" id="searchQuery" placeholder="Buscar por Atendido, Estudante, Escola ou N¬∫..."
                style="flex-grow: 1;">
            <button type="button" class="btn btn-primary" id="btnBuscar">Buscar</button>
            <button type="button" class="btn btn-info" id="btnHistorico"
                title="Ver todos desta categoria">Hist√≥rico</button>
            <button type="button" class="btn btn-dark" id="btnExportar"
                title="Salvar backup dos dados">Exportar</button>
            <button type="button" class="btn btn-warning" id="btnEstatistica"
                title="Ver estat√≠sticas por escola">Estat√≠stica</button>
            <div class="header-total">
                <span id="totalRecordsLabel">Total: </span>
                <span id="totalCountBadge" class="count-badge">0</span>
            </div>
        </div>
        <div id="searchResults" class="search-results" style="display: none;"></div>
    </div>

    <header>
        <div class="logo-container" id="containerLogo1">
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                alt="Logo Esquerda" id="logo1">
        </div>

        <div class="header-title">
            <h1 id="tituloContainer">
                <span id="tituloPrincipal">ATENDIMENTO √Ä
                    COMUNIDADE</span>
                <span class="numero-label"> N¬∫ </span>
                <input type="text" id="numeroAtendimentoInput" value="0001" class="id-stamped" title="N√∫mero" readonly>
            </h1>
        </div>

        <div class="logo-container" id="containerLogo2">
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Logo Direita"
                id="logo2">
        </div>
    </header>



    <div class="category-selection no-print">
        <button type="button" class="category-btn" data-category="Educa√ß√£o Infantil">Educa√ß√£o Infantil</button>
        <button type="button" class="category-btn" data-category="Ensino Fundamental / EJA">Ensino Fundamental /
            EJA</button>
        <button type="button" class="category-btn" data-category="OSCs">OSCs</button>
    </div>

    <div id="tipoAtendimentoDescription" class="category-status no-print">
        Categoria Selecionada: <span>N√£o Informado</span>
    </div>

    <form id="atendimentoForm">
        <input type="hidden" id="tipoAtendimento" name="tipoAtendimento" value="N√£o Informado">

        <div class="category-display-print">
            <strong>Tipo de Atendimento:</strong> <span id="tipoAtendimentoDisplay">N√£o Informado</span>
        </div>


        <div class="form-row">
            <div class="form-group" style="flex: 2;">
                <label for="nomeAtendido">Nome do Atendido</label>
                <input type="text" id="nomeAtendido" name="nomeAtendido" required>
            </div>
            <div class="form-group">
                <label for="parentesco">Grau de Parentesco</label>
                <input type="text" id="parentesco" name="parentesco">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="endereco">Endere√ßo</label>
                <input type="text" id="endereco" name="endereco">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group" style="flex: 1;">
                <label for="telefone1">Telefone 1</label>
                <input type="tel" id="telefone1" name="telefone1" placeholder="(  ) _____-____">
            </div>
            <div class="form-group" style="flex: 1;">
                <label for="telefone2">Telefone 2</label>
                <input type="tel" id="telefone2" name="telefone2" placeholder="(  ) _____-____">
            </div>
        </div>
        <div class="form-row student-row">
            <div class="form-group" style="flex: 2;">
                <label for="nomeEstudante">Nome do Estudante</label>
                <input type="text" id="nomeEstudante" name="nomeEstudante" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group" style="flex: 2;">
                <label for="escola">Escola</label>
                <input type="text" id="escola" name="escola">
            </div>
            <div class="form-group">
                <label for="serie">S√©rie/Ano</label>
                <input type="text" id="serie" name="serie">
            </div>
        </div>


        <div class="form-group">
            <label for="assunto">Assunto</label>
            <input type="text" id="assunto" name="assunto" required>
        </div>

        <div class="form-group">
            <label for="descricao">Descri√ß√£o</label>
            <textarea id="descricao" name="descricao" spellcheck="false" rows="10"></textarea>
            <div id="descricaoMirror" class="print-only-text"></div>
        </div>

        <!-- Attachment Section -->
        <div class="form-group attachment-section no-print" style="margin-top: 15px;">
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <a href="https://drive.google.com/drive/folders/1oQLWANZZjkK51-PoF1P2s2fw-lzX4QHI?usp=drive_link"
                    target="_blank" class="btn btn-warning"
                    style="text-decoration: none; display: inline-flex; align-items: center;">
                    <span style="margin-right: 5px;">üìÇ</span> Google Drive (Anexos)
                </a>
            </div>
            <div id="anexosList" class="anexos-list" style="display: none;"></div>
        </div>



        <div class="despachos-grid">
            <div class="form-group">
                <label for="despachoInspetor">Despacho do Inspetor / Atendente</label>
                <textarea id="despachoInspetor" name="despachoInspetor" class="despacho-box" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label for="despachoCoordenacao">Despacho da Diretoria de Inspe√ß√£o Escolar</label>
                <textarea id="despachoCoordenacao" name="despachoCoordenacao" class="despacho-box" rows="3"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label for="devolutiva">Devolutiva do Atendimento</label>
            <textarea id="devolutiva" name="devolutiva" class="despacho-box" rows="3"></textarea>
        </div>

        <div class="form-row" style="margin-top: 20px;">
            <div class="form-group">
                <label for="local">Local</label>
                <input type="text" id="local" name="local" value="Uberl√¢ndia-MG" readonly>
            </div>
            <div class="form-group">
                <label for="data">Data</label>
                <input type="date" id="data" name="data">
            </div>
        </div>

        <div class="signatures-row">
            <div class="signature-field atendido-signature">
                <input type="text" id="nomeAtendidoAssinatura" name="nomeAtendidoAssinatura"
                    style="text-align: center; border: none; border-bottom: 1px solid #000; padding: 5px; background: transparent; width: 100%;">
                <p>Assinatura do Atendido</p>
            </div>
            <div class="signature-field">
                <div class="form-group">
                    <input type="text" id="nomeAtendente" name="nomeAtendente"
                        style="text-align: center; border: none; border-bottom: 1px solid #000; padding: 5px; background: transparent;">
                    <p>Atendente</p>
                </div>
            </div>
        </div>

        <div class="actions">
            <button type="button" class="btn btn-danger" id="btnExcluir" style="display: none;">Excluir</button>
            <button type="button" class="btn btn-secondary" onclick="window.print()">Imprimir</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
            <button type="button" class="btn btn-success" id="btnSalvarNovo">Salvar e Novo</button>
        </div>
    </form>
    <footer class="app-footer">
        <p>&copy; 2026 Inspe√ß√£o Escolar - SME. Todos os direitos reservados.</p>
    </footer>
</div>


<!-- Custom Modal System -->
<div id="customModal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
        <div class="modal-header">
            <h3 id="modalTitle">Mensagem</h3>
        </div>
        <div class="modal-body">
            <p id="modalMessage"></p>
        </div>
        <div class="modal-footer">
            <button id="modalBtnCancel" class="btn btn-secondary">Cancelar</button>
            <button id="modalBtnConfirm" class="btn btn-primary">Confirmar</button>
        </div>
    </div>
</div>

<input type="file" id="logoInput" accept="image/*" style="display: none;">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<script src="script.js?v=108"></script>
</body>

</html>